"#!/bin/bash\n\n# Easy Proton å‘å¸ƒè„šæœ¬\n# ä½¿ç”¨æ–¹æ³•: ./scripts/release.sh [patch|minor|major]\n\nset -e  # é‡åˆ°é”™è¯¯ç«‹å³é€€å‡º\n\n# é¢œè‰²å®šä¹‰\nRED='\\033[0;31m'\nGREEN='\\033[0;32m'\nYELLOW='\\033[1;33m'\nNC='\\033[0m' # No Color\n\n# å‡½æ•°ï¼šæ‰“å°å¸¦é¢œè‰²çš„æ¶ˆæ¯\nprint_info() {\n    echo -e \"${GREEN}[INFO]${NC} $1\"\n}\n\nprint_warn() {\n    echo -e \"${YELLOW}[WARN]${NC} $1\"\n}\n\nprint_error() {\n    echo -e \"${RED}[ERROR]${NC} $1\"\n}\n\n# æ£€æŸ¥å‚æ•°\nif [ $# -eq 0 ]; then\n    print_error \"è¯·æŒ‡å®šç‰ˆæœ¬æ›´æ–°ç±»å‹: patch, minor æˆ– major\"\n    echo \"ç”¨æ³•: $0 [patch|minor|major]\"\n    exit 1\nfi\n\nVERSION_TYPE=$1\n\n# 1. æ£€æŸ¥å·¥ä½œç›®å½•æ˜¯å¦å¹²å‡€\nif [[ -n $(git status --porcelain) ]]; then\n    print_error \"å·¥ä½œç›®å½•æœ‰æœªæäº¤çš„æ›´æ”¹ï¼Œè¯·å…ˆæäº¤æ›´æ”¹\"\n    exit 1\nfi\n\nprint_info \"1. æ‹‰å–æœ€æ–°ä»£ç ...\"\ngit pull origin main\n\n# 2. è¿è¡Œæµ‹è¯•\nprint_info \"2. è¿è¡Œæµ‹è¯•...\"\nnpm run build\ncd src-tauri && cargo check\ncd ..\n\n# 3. æ›´æ–°ç‰ˆæœ¬å·\nprint_info \"3. æ›´æ–°ç‰ˆæœ¬å· ($VERSION_TYPE)...\"\n\n# æ›´æ–°å‰ç«¯ç‰ˆæœ¬å·\nOLD_VERSION=$(node -p \"require('./package.json').version\")\nnpm version $VERSION_TYPE --no-git-tag-version\nNEW_VERSION=$(node -p \"require('./package.json').version\")\n\n# æ›´æ–°Rustç‰ˆæœ¬å·\nsed -i \"s/version = \\\"$OLD_VERSION\\\"/version = \\\"$NEW_VERSION\\\"/\" src-tauri/Cargo.toml\n\n# æ›´æ–°tauri.conf.jsonç‰ˆæœ¬å·\nsed -i \"s/\\\"version\\\": \\\"$OLD_VERSION\\\"/\\\"version\\\": \\\"$NEW_VERSION\\\"/\" src-tauri/tauri.conf.json\n\nprint_info \"ç‰ˆæœ¬ä» $OLD_VERSION æ›´æ–°åˆ° $NEW_VERSION\"\n\n# 4. ç”Ÿæˆæ›´æ–°æ—¥å¿—\nprint_info \"4. ç”Ÿæˆæ›´æ–°æ—¥å¿—...\"\nif [ ! -f CHANGELOG.md ]; then\n    echo \"# æ›´æ–°æ—¥å¿—\" > CHANGELOG.md\n    echo \"\" >> CHANGELOG.md\nfi\n\n# è·å–æœ€è¿‘çš„æäº¤ä¿¡æ¯\nRECENT_COMMITS=$(git log --oneline -n 10)\necho \"\" >> CHANGELOG.md\necho \"## v$NEW_VERSION ($(date +%Y-%m-%d))\" >> CHANGELOG.md\necho \"\" >> CHANGELOG.md\necho \"### æ–°åŠŸèƒ½\" >> CHANGELOG.md\necho \"- è‡ªåŠ¨å‘å¸ƒè„šæœ¬\" >> CHANGELOG.md\necho \"\" >> CHANGELOG.md\necho \"### æœ€è¿‘æäº¤\" >> CHANGELOG.md\necho \"\`\`\`\" >> CHANGELOG.md\necho \"$RECENT_COMMITS\" >> CHANGELOG.md\necho \"\`\`\`\" >> CHANGELOG.md\n\n# 5. æäº¤æ›´æ”¹\nprint_info \"5. æäº¤ç‰ˆæœ¬æ›´æ–°...\"\ngit add .\ngit commit -m \"chore: release v$NEW_VERSION\"\n\n# 6. åˆ›å»ºæ ‡ç­¾\nprint_info \"6. åˆ›å»ºGitæ ‡ç­¾ v$NEW_VERSION...\"\ngit tag -a \"v$NEW_VERSION\" -m \"Release v$NEW_VERSION\"\n\n# 7. æ¨é€ä»£ç å’Œæ ‡ç­¾\nprint_info \"7. æ¨é€åˆ°GitHub...\"\ngit push origin main\ngit push origin \"v$NEW_VERSION\"\n\n# 8. æ˜¾ç¤ºä¸‹ä¸€æ­¥æ“ä½œ\nprint_info \"\\nğŸ‰ å‘å¸ƒå‡†å¤‡å®Œæˆï¼\"\nprint_info \"ç‰ˆæœ¬: v$NEW_VERSION\"\nprint_info \"æ ‡ç­¾å·²æ¨é€åˆ°GitHub\"\nprint_info \"\\nä¸‹ä¸€æ­¥:\"\necho \"1. GitHub Actionsä¼šè‡ªåŠ¨å¼€å§‹æ„å»º\"\necho \"2. å‰å¾€ https://github.com/\$USER/easy-proton-ui/releases\"\necho \"3. ç­‰å¾…æ„å»ºå®Œæˆï¼ˆçº¦5-10åˆ†é’Ÿï¼‰\"\necho \"4. æ£€æŸ¥æ„å»ºäº§ç‰©å¹¶å‘å¸ƒRelease\"\n\nprint_info \"\\næˆ–è€…ä½¿ç”¨Tauri CLIä¸€é”®å‘å¸ƒ:\"\necho \"npm run tauri publish\"\n\nprint_info \"\\nå‘å¸ƒå®Œæˆï¼ ğŸš€\""